(()=>{"use strict";let t=()=>JSON.parse(localStorage.getItem("watchlist"))??[],e=(e,s=(()=>{}),d=!1)=>{const a=document.createElement("button");a.classList.add("btn"),d&&(a.classList.add("btn--100"),a.classList.add("btn--center")),a.classList.add("btn--danger");const i=document.createElement("em");i.classList.add("material-icons-outlined"),i.textContent="remove",n(a,i,e),a.addEventListener("click",(()=>{(e=>{const n=t(),s=n.findIndex((t=>t.title===e.title));s>-1?n.splice(s,1):n.push(e),(t=>{localStorage.setItem("watchlist",JSON.stringify(t))})(n)})(e),n(a,i,e),s()}));const o=document.createElement("span");return o.textContent="Watchlist",a.appendChild(i),a.appendChild(o),a},n=(e,n,s)=>{(e=>t().findIndex((t=>t.title===e.title))>-1)(s)?(n.textContent="remove",e.classList.add("btn--danger")):(n.textContent="add",e.classList.remove("btn--danger"))},s=t=>{const e=document.createElement("div");e.classList.add("movie__footer");const n=document.createElement("h3");n.classList.add("movie__title"),n.textContent=t.title;const s=document.createElement("span");s.classList.add("movie__rating");const d=t.vote_average;return d>=0&&d<3.3?s.classList.add("movie__rating--bad"):d>=3.3&&d<6.6?s.classList.add("movie__rating--okay"):d>=6.6&&d<10&&s.classList.add("movie__rating--good"),s.textContent=d.toFixed(1),e.appendChild(n),e.appendChild(s),e},d=()=>{fetch("https://api.themoviedb.org/3/movie/popular?api_key=0f2fb5bb9dd4392d617cd67097866357").then((t=>t.json())).then((t=>t.results)).then((t=>{const n=document.getElementById("popular-movies");t.forEach((t=>((t,n)=>{const d=document.createElement("article");d.classList.add("movie");const a=document.createElement("img");a.classList.add("movie__poster"),a.alt=`Poster of ${t.title}`,a.src=`https://image.tmdb.org/t/p/w500${t.poster_path}`;const i=s(t),o=(t=>{const n=document.createElement("div");n.classList.add("movie__details");const d=s(t),a=document.createElement("p");a.classList.add("movie__description"),a.textContent=t.overview;const i=document.createElement("div");i.classList.add("movie__actions");const o=e(t,void 0,!0);return i.appendChild(o),n.appendChild(d),n.appendChild(a),n.appendChild(i),n})(t);d.appendChild(a),d.appendChild(i),d.appendChild(o),n.appendChild(d)})(t,n)))}))};const a={"page-index":()=>{d()},"page-watchlist":()=>{(()=>{const n=document.getElementById("watchlist"),s=new class{createWatchlistUI(t){const n=document.createElement("li");n.id=`movie-${t.id}`,n.classList.add("list__item"),n.setAttribute("data-movie-id",t.id);const s=document.createElement("h3");s.classList.add("list__title"),s.textContent=t.title;const d=e(t,(()=>{document.getElementById(`movie-${t.id}`).classList.add("list__item--hide")}));return n.appendChild(s),n.appendChild(d),n}createNoItemsInfo(){const t=document.createElement("li");return t.classList.add("alert"),t.textContent='There are no movies in your watchlist. Shhh, I\'ve heard that "Tenet" is a nice one! ðŸ¤«',t}},d=t();d.length>0?d.forEach((t=>{n.appendChild(s.createWatchlistUI(t,n))})):n.appendChild(s.createNoItemsInfo()),((t,e)=>{document.getElementById("watchlist-filter").addEventListener("keyup",(n=>{const s=n.target.value.toLowerCase(),d=e.filter((t=>t.title.toLowerCase().includes(s))).map((t=>`movie-${t.id}`)),a=t.children;for(let t of a)d.includes(t.id)?t.classList.remove("list__item--hide"):t.classList.add("list__item--hide")}))})(n,d)})()}},i=()=>{const t=document.body.id;a[t]()};(()=>{(()=>{const t=document.querySelector("main"),e=document.querySelector("nav");t.addEventListener("scroll",(()=>{((t,e)=>{t.scrollTop>75?e.classList.add("nav--on-scroll"):e.classList.remove("nav--on-scroll")})(t,e)}))})()})(),i()})();