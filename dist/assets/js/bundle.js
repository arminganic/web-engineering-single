(()=>{"use strict";let t=()=>JSON.parse(localStorage.getItem("watchlist"))??[],e=(e,d=(()=>{}),n=!1)=>{const i=document.createElement("button");i.classList.add("btn"),n&&(i.classList.add("btn--100"),i.classList.add("btn--center")),i.classList.add("btn--danger");const a=document.createElement("em");a.classList.add("material-icons-outlined"),a.textContent="remove",s(i,a,e),i.addEventListener("click",(()=>{(e=>{const s=t(),d=s.findIndex((t=>t.title===e.title));d>-1?s.splice(d,1):s.push(e),(t=>{localStorage.setItem("watchlist",JSON.stringify(t))})(s)})(e),s(i,a,e),d()}));const o=document.createElement("span");return o.textContent="Watchlist",i.appendChild(a),i.appendChild(o),i},s=(e,s,d)=>{(e=>t().findIndex((t=>t.title===e.title))>-1)(d)?(s.textContent="remove",e.classList.add("btn--danger")):(s.textContent="add",e.classList.remove("btn--danger"))},d=t=>{const e=document.createElement("div");e.classList.add("movie__footer");const s=document.createElement("h3");s.classList.add("movie__title"),s.textContent=t.title;const d=document.createElement("span");d.classList.add("movie__rating");const n=t.vote_average;return n>=0&&n<3.3?d.classList.add("movie__rating--bad"):n>=3.3&&n<6.6?d.classList.add("movie__rating--okay"):n>=6.6&&n<10&&d.classList.add("movie__rating--good"),d.textContent=n.toFixed(1),e.appendChild(s),e.appendChild(d),e},n=()=>{fetch("https://api.themoviedb.org/3/movie/popular?api_key=0f2fb5bb9dd4392d617cd67097866357").then((t=>t.json())).then((t=>t.results)).then((t=>{const s=document.getElementById("popular-movies");t.forEach((t=>((t,s)=>{const n=document.createElement("article");n.classList.add("movie");const i=document.createElement("img");i.classList.add("movie__poster"),i.alt=`Poster of ${t.title}`,i.src=`https://image.tmdb.org/t/p/w500${t.poster_path}`;const a=d(t),o=(t=>{const s=document.createElement("div");s.classList.add("movie__details");const n=d(t),i=document.createElement("p");i.classList.add("movie__description"),i.textContent=t.overview;const a=document.createElement("div");a.classList.add("movie__actions");const o=e(t,void 0,!0);return a.appendChild(o),s.appendChild(n),s.appendChild(i),s.appendChild(a),s})(t);n.appendChild(i),n.appendChild(a),n.appendChild(o),s.appendChild(n)})(t,s)))}))};const i={"page-index":()=>{n()},"page-watchlist":()=>{(()=>{const s=document.getElementById("watchlist"),d=new class{createWatchlistUI(t){const s=document.createElement("li");s.id=`movie-${t.id}`,s.classList.add("list__item"),s.setAttribute("data-movie-id",t.id);const d=document.createElement("h3");d.classList.add("list__title"),d.textContent=t.title;const n=e(t,(()=>{document.getElementById(`movie-${t.id}`).classList.add("list__item--hide")}));return s.appendChild(d),s.appendChild(n),s}},n=t();n.forEach((t=>{s.appendChild(d.createWatchlistUI(t,s))})),((t,e)=>{document.getElementById("watchlist-filter").addEventListener("keyup",(s=>{const d=s.target.value.toLowerCase(),n=e.filter((t=>t.title.toLowerCase().includes(d))).map((t=>`movie-${t.id}`)),i=t.children;for(let t of i)n.includes(t.id)?t.classList.remove("list__item--hide"):t.classList.add("list__item--hide")}))})(s,n)})()}},a=()=>{const t=document.body.id;i[t]()};(()=>{(()=>{const t=document.querySelector("main"),e=document.querySelector("nav");t.addEventListener("scroll",(()=>{((t,e)=>{t.scrollTop>75?e.classList.add("nav--on-scroll"):e.classList.remove("nav--on-scroll")})(t,e)}))})()})(),a()})();