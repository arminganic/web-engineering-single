(()=>{"use strict";let t=()=>JSON.parse(localStorage.getItem("watchlist"))??[],e=e=>{const s=document.createElement("button");s.classList.add("btn"),s.classList.add("btn--100"),s.classList.add("btn--center");const d=document.createElement("em");d.classList.add("material-icons-outlined");const a=document.createElement("span");return a.textContent="Watchlist",n(s,d,e),s.addEventListener("click",(()=>{(e=>{const n=t(),s=n.indexOf(e.title);s>-1?n.splice(s,1):n.push(e.title),(t=>{localStorage.setItem("watchlist",JSON.stringify(t))})(n)})(e),n(s,d,e)})),s.appendChild(d),s.appendChild(a),s},n=(e,n,s)=>{(e=>t().indexOf(e.title)>-1)(s)?(n.textContent="remove",e.classList.add("btn--danger")):(n.textContent="add",e.classList.remove("btn--danger"))},s=t=>{const e=document.createElement("div");e.classList.add("movie__footer");const n=document.createElement("h3");n.classList.add("movie__title"),n.textContent=t.title;const s=document.createElement("span");s.classList.add("movie__rating");const d=t.vote_average;return d>=0&&d<3.3?s.classList.add("movie__rating--bad"):d>=3.3&&d<6.6?s.classList.add("movie__rating--okay"):d>=6.6&&d<10&&s.classList.add("movie__rating--good"),s.textContent=d.toFixed(1),e.appendChild(n),e.appendChild(s),e};const d={"page-index":()=>{fetch("https://api.themoviedb.org/3/movie/popular?api_key=0f2fb5bb9dd4392d617cd67097866357").then((t=>t.json())).then((t=>t.results)).then((t=>{const n=document.getElementById("popular-movies");t.forEach((t=>((t,n)=>{const d=document.createElement("article");d.classList.add("movie");const a=document.createElement("img");a.classList.add("movie__poster"),a.src=`https://image.tmdb.org/t/p/w500${t.poster_path}`;const o=(t=>{const n=document.createElement("div");n.classList.add("movie__details");const d=s(t),a=document.createElement("p");a.classList.add("movie__overview"),a.textContent=t.overview;const o=document.createElement("div");o.classList.add("movie__actions");const c=e(t);return o.appendChild(c),n.appendChild(d),n.appendChild(a),n.appendChild(o),n})(t),c=s(t);d.appendChild(a),d.appendChild(c),d.appendChild(o),n.appendChild(d)})(t,n)))}))},"page-watchlist":()=>{const e=document.getElementById("watchlist");t().forEach((t=>{const n=document.createElement("li");n.textContent=t,e.appendChild(n)}))}},a=()=>{const t=document.body.id;d[t]()};(()=>{(()=>{const t=document.querySelector("main"),e=document.querySelector("nav");t.addEventListener("scroll",(()=>{((t,e)=>{t.scrollTop>75?e.classList.add("nav--on-scroll"):e.classList.remove("nav--on-scroll")})(t,e)}))})()})(),a()})();